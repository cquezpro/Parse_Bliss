Ext.data.JsonP.BlissView({"guide":"<h1 id='BlissView-section-blissview'>BlissView</h1>\n<div class='toc'>\n<p><strong>Contents</strong></p>\n<ol>\n<li><a href='#!/guide/BlissView-section-creating-a-new-form-or-exercise'>Creating a new form or exercise</a></li>\n<li><a href='#!/guide/BlissView-section-blissview-hooks'>BlissView Hooks</a></li>\n<li><a href='#!/guide/BlissView-section-templatehooks'>TemplateHooks</a></li>\n</ol>\n</div>\n\n<p>BlissView extends backbones View class to provide specific functionality for Forms and Exercises.</p>\n\n<p>BlissView loads data from a model or collection and displays a series of templates which the user can move through. This allows to create multi-step forms, creating a template file for each step.  BlissViews will display the next template on submission, until there are no templates left, and then run a completion callback, which normally removes the view from the DOM.</p>\n\n<p>The BlissForm and BlissExercise both extend BlissView with very little change.  In the future, we may move Exercise related code into BlissExercise, or we may eliminate BlissExercise and BlissForm and just use BlissView</p>\n\n<h2 id='BlissView-section-creating-a-new-form-or-exercise'>Creating a new form or exercise</h2>\n\n<p>To create a new form or exercise, you should create a sub-class of BlissForm or BlissExercise, both of which extend BlissView.</p>\n\n<p>There are bash scripts for automatically creating a new exercise / form from a template:</p>\n\n<p>/dev/scripts/addexercise/addexercise.sh\n/dev/scripts/addexercise/addexercise.sh</p>\n\n<p>The basic sub-class declaration looks like this:</p>\n\n<pre class='inline-example '><code>MyForm = BlissForm.extend({\n  name: 'MyForm',  //Each view must provide a unique name\n  dataClass: 'MyForm', //The key to use for model / collection retrieval - defaults to MyForm.name\n  modelClass: ParseCollection, //The class that will act a collection, defaults to ParseCollection\n  display_name: 'My Cool Form', //Name shown to the user\n  templates: ['MyForm.tpl.htm'], //Either an array of templates, or a function returning an array of templates\n  fields: {  //An objects containing fields that will be loaded by the model\n    myfield: {dataType: 'boolean', defaultValue: true, fieldType: 'checkbox'},\n  },\n  //BLISS VIEW HOOKS\n  Init: function() {\n    //Initialization code\n  },\n  PreRender: function() {\n    //Do stuff before view is rendered\n  },\n  PostRender: function() {\n    //Set custom event handlers or other things after view is rendered\n  },\n</code></pre>\n\n<h2 id='BlissView-section-blissview-hooks'>BlissView Hooks</h2>\n\n<p>You can implement hooks in your sub-class of BlissForm and BlissExercise (inherited from BlissView)</p>\n\n<p>Available Hooks\n-Init\n-PreRender\n-PostRender\n-ChangeHandler\n-PreSubmit</p>\n\n<h3 id='BlissView-section-init'>Init</h3>\n\n<p>First hook called when a View is created.  Useful sometimes for settings default values for fields with generated values that aren't available at class declaration.</p>\n\n<p>i.e.\n    @example\n    Init: function() {\n      this.fields.mood_tracker_times_per_day.defaultValue = new SplitTest('Initiator-launches-per-day').values([1,2,3]);\n    },</p>\n\n<h3 id='BlissView-section-prerender'>PreRender</h3>\n\n<p>Called before the template is paired with data from the model and rendered. Mainly useful for setting data that must be determined at run time and\ncan't be defined in the fields</p>\n\n<pre class='inline-example '><code>PreRender: function() {\n  //Get the model that is currently bound to our view\n  var model = this.getModel();\n  if (<a href=\"#!/api/Bliss-method-getRandomInt\" rel=\"Bliss-method-getRandomInt\" class=\"docClass\">Bliss.getRandomInt</a>(1, 100) == 100) {\n    model.set('winner', true);\n    <a href=\"#!/api/Bliss-method-message\" rel=\"Bliss-method-message\" class=\"docClass\">Bliss.message</a>(\"You are the lucky winner of an all-expense paid trip to Hawaii!\");\n  }\n}\n</code></pre>\n\n<h3 id='BlissView-section-changehandler'>ChangeHandler</h3>\n\n<p>Called whenever a form element is changed.  If you set one on the field, it's your responsibility to update the model:</p>\n\n<pre class='inline-example '><code>fields: {\n  myfield: {dataType: 'boolean', defaultValue: true, fieldType: 'checkbox', ChangeHandler: 'myChangeHandler'},\n},\n\nmyChangeHandler: function(field, value, changed) {\n  this.getModel().set(field.name, value);\n}\n</code></pre>\n\n<h2 id='BlissView-section-templatehooks'>TemplateHooks</h2>\n\n<p>If you only want your code to run when a specfic template is loaded, you can use a template hook.</p>\n\n<pre class='inline-example '><code>templateHooks: {\n  'honoring-people-email.tpl.htm': {\n    //The following hooks only run when honoring-people-email.tpl.htm is loaded\n    //And will not run for other templates in the view\n    PreRender: function() {\n      <a href=\"#!/api/Bliss-method-message\" rel=\"Bliss-method-message\" class=\"docClass\">Bliss.message</a>('Your Honoring People exercise has been saved.')\n      this.save();\n    },\n    PostRender: function() {\n      var that = this;\n      $('a.email').click(function(e){\n        that.getModel().set('email_link_clicked', 1);\n        that.save();\n      });\n    }\n  }\n}\n</code></pre>\n","title":"BlissView"});